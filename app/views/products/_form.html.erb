<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card mt-2">
        <div class="m-2">
          <div class="card-header">
            <h2 class="text-center m-4">New Product</h2>
          </div>
          <div class="card-body">
            <%= form_with(model: product, html: { class: "row g-3" }) do |form| %>
              <% if product.errors.any? %>
                <div class="col-md-12">
                  <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading"><%= pluralize(product.errors.count, "error") %> prohibited this product from being saved:</h4>
                    <ul>
                      <% product.errors.full_messages.each do |error| %>
                        <li><%= error %></li>
                      <% end %>
                    </ul>
                  </div>
                </div>
              <% end %>
              <div class="col-md-12">
                <%= form.label :title, "Title", style: "display: block" %>
                <%= form.text_field :title, class: "form-control" %>
              </div>
              <div class="col-md-12">
                <%= form.label :description, "Description", style: "display: block" %>
                <%= form.text_area :description, class: "form-control" %>
              </div>
              <div class="col-md-12">
                <%= form.label :price, "Price", style: "display: block" %>
                <%= form.number_field :price, class: "form-control" %>
              </div>
              <div class="col-md-12">
                <%= form.label :address, "Address", style: "display: block" %>
                <%= form.text_field :address, value: current_user.address, readonly: true, class: "form-control disabled" %>
              </div>
              <div>
                <%= form.file_field :photo, class: "form-control" %>
              </div>
              <div class="col-md-12 text-center">
                <%= form.submit "Create Product", class: "btn btn-primary mb-4 col-3" %>
              </div>
              <%= f.input :address,
                input_html: {data: {address_autocomplete_target: "address"}},
                wrapper_html: {data: {controller: "address-autocomplete", address_autocomplete_api_key_value: ENV["MAPBOX_API_KEY"]}}
                %>
            <% end %>
            <%= link_to "Back to products", products_path %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
